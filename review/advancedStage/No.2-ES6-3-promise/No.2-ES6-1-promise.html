<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
//    callback hell
//promise语法
    function loadImg (src,callback,fail){
        var img =document.createElement('img')
        img.onload =function(){
            callback(img)
        }
        img.onerror= function () {
            fail()
        }
        img.src = src
    }
    var src ='http://www.imooc.com/static/img/index/login'
    loadImg(src,function (img) {
        console.log(img.width)
    },function () {
        console.log('failed');
    })

    function loadImg(src) {
        const promise =new Promise(function (resolve,request) {
            var img =document.createElement('img')
            img.onerror =function () {
                img.src=src

            }
        })
    return promise
    }
</script>
</body>
</html>